package com.leyreromero.psp.cine_simulacion_concurrente;

import java.text.SimpleDateFormat;
import java.util.Date;

public class Reserva {

	private int id;
	private Cliente cliente;
	private Proyeccion proyeccion;
	private int numeroAsiento;
	private double precioFinal;
	private long timestamp;

	public Reserva(int id, Cliente cliente, Proyeccion proyeccion, int numeroAsiento) {
		this.id = id;
		this.cliente = cliente;
		this.proyeccion = proyeccion;
		this.numeroAsiento = numeroAsiento;
		this.timestamp = System.currentTimeMillis();
		this.precioFinal = proyeccion.getPelicula().getPrecioBase();
	}
	
	public int getId() { return id; }
	public Cliente getCliente() { return cliente; }
	public int getNumeroAsiento() { return numeroAsiento; }
	public double getPrecioFinal() { return precioFinal; }
	public long getTimestamp() { return timestamp; }


	@Override
	public String toString() {
		// 1. Creamos el formato que nos guste
	    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
	    
	    // 2. Convertimos los milisegundos a un objeto Date
	    String horaLegible = sdf.format(new Date(this.timestamp));
	    
		return "Ticket #" + id + " | Cliente: " + cliente.getNombre() + " | Pelicula:"+proyeccion.getPelicula().getTitulo()+
				" | Asiento: " + numeroAsiento + " | Hora: " + horaLegible +
				" | Precio: " + String.format("%.2f", precioFinal) + "â‚¬";
	}

}
